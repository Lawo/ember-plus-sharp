<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Page 8: Handle Communication Errors</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="df1c42d3-bc00-4786-88d6-2372b281043a" /><meta name="Description" content="Communication errors are signalled through two different mechanisms, see the sections below for more information." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Ember+ Sharp Project Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="046877b5-3e57-48ca-8868-7885de0e3842.htm" title="Ember+ Sharp Project Documentation" tocid="roottoc">Ember+ Sharp Project Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="427fadff-8d32-472e-83d1-3ceaf705ae51.htm" title="Lawo.EmberPlus.Model Namespace Tutorial" tocid="427fadff-8d32-472e-83d1-3ceaf705ae51">Lawo.EmberPlus.Model Namespace Tutorial</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c319e2c2-fa9a-4ad5-bc4f-74a85a91eb78.htm" title="Page 3: Dynamic Interface" tocid="c319e2c2-fa9a-4ad5-bc4f-74a85a91eb78">Page 3: Dynamic Interface</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f6285c3c-ef54-453e-90ad-5546ec1a7a1d.htm" title="Page 4: Create a Local Copy of the Provider Database" tocid="f6285c3c-ef54-453e-90ad-5546ec1a7a1d">Page 4: Create a Local Copy of the Provider Database</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e0972d29-96f3-4dea-936b-f77001d077b1.htm" title="Page 5: Iterate over the Local Database" tocid="e0972d29-96f3-4dea-936b-f77001d077b1">Page 5: Iterate over the Local Database</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7cdb703a-14dd-42d3-8ea2-28a9b8af6663.htm" title="Page 6: React to Changes" tocid="7cdb703a-14dd-42d3-8ea2-28a9b8af6663">Page 6: React to Changes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="84d499e7-ec08-4311-8038-987c167eaa43.htm" title="Page 7: Send Local Changes to the Provider" tocid="84d499e7-ec08-4311-8038-987c167eaa43">Page 7: Send Local Changes to the Provider</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="df1c42d3-bc00-4786-88d6-2372b281043a.htm" title="Page 8: Handle Communication Errors" tocid="df1c42d3-bc00-4786-88d6-2372b281043a">Page 8: Handle Communication Errors</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn">Page 8: Handle Communication Errors</td></tr></table><span class="introStyle"></span><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[This is preliminary documentation and is subject to change.]</p><div class="introduction"><p>
        Communication errors are signalled through two different mechanisms, see the sections below for more
        information.
      </p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#ConnectionLost">The ConnectionLost Event</a></li><li class="outlineSectionEntry"><a href="#Exceptions">Exceptions</a></li></ul></div><div class="collapsibleAreaRegion" id="ConnectionLost"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />The ConnectionLost Event</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          At the lowest level, communication errors are signaled through the
          <a href="437AC593.htm">Consumer<span id="LST28C8E89B_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_0?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TRoot<span id="LST28C8E89B_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_1?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script><span id="LST28C8E89B_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>ConnectionLost</a>
          event, which can be used as demonstrated in the following method:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EABACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">AsyncPump.Run(
    <span class="highlight-keyword">async</span> () =&gt;
    {
        <span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> client = <span class="highlight-keyword">await</span> ConnectAsync(<span class="highlight-literal">"localhost"</span>, <span class="highlight-number">9000</span>))
        <span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> consumer = <span class="highlight-keyword">await</span> Consumer&lt;MyRoot&gt;.CreateAsync(client))
        {
            <span class="highlight-keyword">var</span> connectionLost = <span class="highlight-keyword">new</span> TaskCompletionSource&lt;Exception&gt;();
            consumer.ConnectionLost += (s, e) =&gt; connectionLost.SetResult(e.Exception);

            Console.WriteLine(<span class="highlight-literal">"Waiting for the provider to disconnect..."</span>);
            <span class="highlight-keyword">var</span> exception = <span class="highlight-keyword">await</span> connectionLost.Task;
            Console.WriteLine(<span class="highlight-literal">"Connection Lost!"</span>);
            Console.WriteLine(<span class="highlight-literal">"Exception:{0}{1}"</span>, exception, Environment.NewLine);
        }
    });</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABACAAA");</script><p>
          We can test this by simply closing the provider, or by running the provider on a different computer and then
          disconnecting the network cable. In the former case
          <a href="367D0C00.htm">ConnectionLostEventArgs<span id="LST28C8E89B_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Exception</a>
          is <span class="code">null</span>. In the latter case
          <a href="367D0C00.htm">ConnectionLostEventArgs<span id="LST28C8E89B_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Exception</a>
          indicates the reason for the error.
        </p></div><div class="collapsibleAreaRegion" id="Exceptions"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Exceptions</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          Both
          <a href="FD4252D9.htm">Consumer<span id="LST28C8E89B_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_5?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TRoot<span id="LST28C8E89B_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_6?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script><span id="LST28C8E89B_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_7?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CreateAsync</a>
          and
          <a href="5E9BA754.htm">Consumer<span id="LST28C8E89B_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_8?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TRoot<span id="LST28C8E89B_9"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_9?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script><span id="LST28C8E89B_10"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST28C8E89B_10?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>SendAsync</a>
          can throw communication-related exceptions, which can be caught and handled as usual.
        </p><p>
          This concludes the dynamic interface part of the
          <a href="52CE5528.htm">Lawo.EmberPlus.Model</a> namespace tutorial. Proceed to
          <a href="06184592-a364-4e11-9721-551b6316ffc1.htm">Page 9: Static Interface</a>.
        </p></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://www.lawo.com" target="_blank">Copyright 2012-2015 Lawo AG. All rights reserved.</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:andreas.huber%40lawo.com?Subject=Ember+ Sharp Project Documentation">Andreas Huber</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>