<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Page 17: Iterate over the Local Database</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="56add6fd-a91e-4e3e-a02e-e3e70d4958aa" /><meta name="Description" content="It is assumed that you've followed the steps from to , and thus have a runnable project open in Visual Studio 2015." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Ember+ Sharp Project Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="046877b5-3e57-48ca-8868-7885de0e3842.htm" title="Ember+ Sharp Project Documentation" tocid="roottoc">Ember+ Sharp Project Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="915a270d-2a20-432f-9531-ce6aa3260566.htm" title="Ember+ Sharp Library" tocid="915a270d-2a20-432f-9531-ce6aa3260566">Ember+ Sharp Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="427fadff-8d32-472e-83d1-3ceaf705ae51.htm" title="Lawo.EmberPlusSharp.Model Namespace Tutorial" tocid="427fadff-8d32-472e-83d1-3ceaf705ae51">Lawo.EmberPlusSharp.Model Namespace Tutorial</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="100750a0-fa84-4a68-874d-5e313eb83c9b.htm" title="Page 16: Mixed Interface" tocid="100750a0-fa84-4a68-874d-5e313eb83c9b">Page 16: Mixed Interface</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="56add6fd-a91e-4e3e-a02e-e3e70d4958aa.htm" title="Page 17: Iterate over the Local Database" tocid="56add6fd-a91e-4e3e-a02e-e3e70d4958aa">Page 17: Iterate over the Local Database</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="881824cc-edf4-4007-b30c-cb460d2dcf97.htm" title="Page 18: Send Local Changes to the Provider" tocid="881824cc-edf4-4007-b30c-cb460d2dcf97">Page 18: Send Local Changes to the Provider</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">Page 17: Iterate over the Local Database</td><td class="logoColumn"><img src="../icons/Help.png" /></td></tr></table><span class="introStyle"></span><div class="introduction"><p>
        It is assumed that you've followed the steps from <a href="5b9afbff-f6fc-4870-892f-6d6b76f85c67.htm">Page 1: Prerequisites</a> to
        <a href="3d672617-cf26-40a0-bae0-9b3df394cf0e.htm">Page 15: Nullable Parameters</a>, and thus have a runnable project open in
        <strong>Visual Studio 2015</strong>.
      </p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#DatabaseClasses">Database Classes</a></li><li class="outlineSectionEntry"><a href="#MainMethod">Main Method</a></li></ul></div><div class="collapsibleAreaRegion" id="DatabaseClasses"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Database Classes</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          First we need to declare our expectations about the provider database with the following nested types:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Subclassing Root means that the Children collection of this node will only contain the elements declared</span>
<span class="highlight-comment">// with properties, in this case a single node with the identifier Sapphire, which is also accessible through</span>
<span class="highlight-comment">// the property.</span>
<span class="highlight-keyword">private</span> <span class="highlight-keyword">sealed</span> <span class="highlight-keyword">class</span> MixedSapphireRoot : Root&lt;MixedSapphireRoot&gt;
{
    <span class="highlight-keyword">internal</span> MixedSapphire Sapphire { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">private</span> <span class="highlight-keyword">set</span>; }
}

<span class="highlight-comment">// Subclassing DynamicFieldNode means that the Children collection of this node will contain *all* elements</span>
<span class="highlight-comment">// reported by the provider. Additionally, the node with the identifier Sources is also accessible through the</span>
<span class="highlight-comment">// property.</span>
<span class="highlight-keyword">private</span> <span class="highlight-keyword">sealed</span> <span class="highlight-keyword">class</span> MixedSapphire : DynamicFieldNode&lt;MixedSapphire&gt;
{
    <span class="highlight-keyword">internal</span> CollectionNode&lt;MixedSource&gt; Sources { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">private</span> <span class="highlight-keyword">set</span>; }
}

<span class="highlight-comment">// Subclassing DynamicFieldNode means that the Children collection of this node will contain *all* elements</span>
<span class="highlight-comment">// reported by the provider. Additionally, the nodes Fader and Dsp are also accessible through their</span>
<span class="highlight-comment">// respective properties. The Fader and Dsp types themselves derive from FieldNode, so their Children</span>
<span class="highlight-comment">// collections will only contain the parameters declared as properties.</span>
<span class="highlight-keyword">private</span> <span class="highlight-keyword">sealed</span> <span class="highlight-keyword">class</span> MixedSource : DynamicFieldNode&lt;MixedSource&gt;
{
    <span class="highlight-keyword">internal</span> Fader Fader { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">private</span> <span class="highlight-keyword">set</span>; }

    [Element(Identifier = <span class="highlight-literal">"DSP"</span>)]
    <span class="highlight-keyword">internal</span> Dsp Dsp { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">private</span> <span class="highlight-keyword">set</span>; }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAACAAA");</script></div><div class="collapsibleAreaRegion" id="MainMethod"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Main Method</span></div><div id="ID2RBSection" class="collapsibleSection"><p>We can now iterate over the local database as follows ...</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAEABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAEABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAEABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAEABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">AsyncPump.Run(
    <span class="highlight-keyword">async</span> () =&gt;
    {
        <span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> client = <span class="highlight-keyword">await</span> ConnectAsync(<span class="highlight-literal">"localhost"</span>, <span class="highlight-number">9000</span>))
        <span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> consumer = <span class="highlight-keyword">await</span> Consumer&lt;MixedSapphireRoot&gt;.CreateAsync(client))
        {
            WriteChildren(consumer.Root, <span class="highlight-number">0</span>);
        }
    });</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAEABAAA");</script><p>... and get the following output:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EACABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">Node Sapphire
  Node identity
    Parameter product: sapphire
    Parameter company: (c) L-S-B Broadcast Technologies GmbH
  Node Sources
    Node FPGM <span class="highlight-number">1</span>
      Parameter Audio Type: <span class="highlight-number">2</span>
      Node Fader
        Parameter dB Value: <span class="highlight-number">-255.999999999998</span>
        Parameter Position: <span class="highlight-number">0</span>
      Node DSP
        Node Input
          Parameter Phase: True
          Parameter LR Mode: Stereo
    Node FPGM <span class="highlight-number">2</span>
      Parameter Audio Type: <span class="highlight-number">2</span>
      Node Fader
        Parameter dB Value: <span class="highlight-number">9</span>
        Parameter Position: <span class="highlight-number">255</span>
      Node DSP
        Node Input
          Parameter Phase: False
          Parameter LR Mode: Stereo</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACABAAA");</script><p>
          Note how the <span class="code">Audio Type</span> parameters and the <span class="code">identity</span> node
          with all its children now appear although we have not declared properties for them. This is due to the fact
          that their parents subclass
          <a href="C6A8309C.htm">DynamicFieldNode<span id="LST616FFCC1_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST616FFCC1_0?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TMostDerived<span id="LST616FFCC1_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST616FFCC1_1?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a> rather than
          <a href="5504429E.htm">FieldNode<span id="LST616FFCC1_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST616FFCC1_2?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TMostDerived<span id="LST616FFCC1_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST616FFCC1_3?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>.
        </p><p>Proceed to <a href="881824cc-edf4-4007-b30c-cb460d2dcf97.htm">Page 18: Send Local Changes to the Provider</a>.</p></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://www.boost.org/LICENSE_1_0.txt" target="_blank">Copyright 2012-2015 Lawo AG. Distributed under the Boost Software License, Version 1.0.</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:andreas.huber%40lawo.com?Subject=Ember+ Sharp Project Documentation">Andreas Huber</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>